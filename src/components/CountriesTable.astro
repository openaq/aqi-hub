---
import { reshapeData } from "src/utils/utils";

const baseURL = "http://localhost:4321";
const data = await fetch(new URL(`api/data/indices.json`, baseURL));
const parsed = await data.json();

const reshapedData = reshapeData(parsed);
---

<table>
  <thead>
    <tr>
      {
        Object.keys(reshapedData[0]).map((key) => (
          <th>{key === "country" ? "" : key}</th>
        ))
      }
    </tr>
  </thead>
  <tbody>
    {
      reshapedData.map((row) => (
        <tr>
          {Object.entries(row).map(([key, value]) => (
            <td>{key === "country" ? value : value ? "✅" : "❌"}</td>
          ))}
        </tr>
      ))
    }
  </tbody>
</table>
